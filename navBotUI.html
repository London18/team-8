<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="styles.css">
		<script type="text/javascript">
			function youAppend() {
				//var newText = document.createTextNode(document.getElementById('userIn').value);

				int count = 0;
				//var para = document.getElementById("messagePara");
				
				//creates new paragraph
				var newParagraph = document.createElement('textarea');
				newParagraph.className = "youPara";
				
				//inserts user's text
				newParagraph.textContent = document.getElementById('userIn').value;
				newParagraph.prepend("You: ");
				
				//find the div to put it in
				var div = document.getElementById("messages");
				
				//append the new message
				div.appendChild(newParagraph);
				
				autoGrow(newParagraph);
				
				userIn.value="";
				
				div.scrollTop = div.scrollHeight
				
				document.getElementById(userIn.id).focus();
				document.getElementById(userIn.id).select();	

				//put the thing=== that get files from java and also get response from them
				sendToJava();
				var resultPara = document.createElement('p');
				var textToPrint = getFromJava();
				resultPara.id = 'botIn';
				botAppend();
				
			}
			function sendToJava() {
				
			}
			function getFromJava() {
				return(request.getAttribute("user"));
			}
			
			function autoGrow(element) {
				element.style.height = "5px";
				element.style.height = (element.scrollHeight) + "px";
			}
			function cursorReset() {
				document.getElementById(userIn.id).focus();
				document.getElementById(userIn.id).select();
			}
			function botAppend() {
			
				//count += 1;
				//var newText = document.createTextNode(document.getElementById('userIn').value);

				//var para = document.getElementById("messagePara");
				
				
				//creates new paragraph
				var newParagraph = document.createElement('p');
				newParagraph.className = "botPara";
				
				//inserts user's text
				newParagraph.textContent = document.getElementById('botIn').value;
				newParagraph.prepend("Macs: ");
				
				//find the div to put it in
				var div = document.getElementById("messages");
				
				//append the new message
				div.appendChild(newParagraph)
				
			}
			function printButton() {
			
				count += 1;
				//var newText = document.createTextNode(document.getElementById('userIn').value);

				//var para = document.getElementById("messagePara");
				
				if (count == 3){
				
					newParagraph.append("Sorry but it seems like I can't help right now, I'll refer you to a real person. Please hang on!");
					//Send special string to ya bois in the backend
				
				}else{
				
					
					var newParagraph = document.createElement('p');
					newParagraph.id = "botPara";
					
					//creates new paragraph
					var yesButton = document.createElement('input');
					yesButton.id = "yesButton";
					yesButton.type = "button";
					yesButton.value = "yes";
					//do input thing
					var noButton = document.createElement('input');
					noButton.id = "noButton";
					noButton.type = "button";
					noButton.value = "no";
					
					//inserts Macs' text
					newParagraph.append("Macs: Were any of these resources helpful?");
					
					//find the div to put it in
					var div = document.getElementById("messages");
					
					//append the new message
					div.appendChild(newParagraph);
					div.appendChild(yesButton);
					div.appendChild(noButton);
				}
				
			}
			function enterInput() {
				// Get the input field
				var input = document.getElementById("myInput");

				// Execute a function when the user releases a key on the keyboard
				input.addEventListener("keyup", function(event) {
				  // Cancel the default action, if needed
				  event.preventDefault();
				  // Number 13 is the "Enter" key on the keyboard
				  if (event.keyCode === 13) {
					// Trigger the button element with a click
					document.getElementById("myBtn").click();
				  }
				});
			}
		</script>
	</head>
	<body>
	<div id="all">
		<div id="header">
			<h5>NavBot</h5>
		</div>
		<div id="messages">
			<p class="botPara">Macs: How can I help you?</p>
		</div>
		<div id="input">
			<input id="userIn" type="text" name="userInput"><input id="myButton" type="button" onclick="youAppend()" value="Send"/>
			
			<script>
				cursorReset();
			
				// Get the input field
				var input = document.getElementById("userIn");

				// Execute a function when the user releases a key on the keyboard
				input.addEventListener("keyup", function(event) {
				  // Cancel the default action, if needed
				  event.preventDefault();
				  // Number 13 is the "Enter" key on the keyboard
				  if (event.keyCode === 13) {
					// Trigger the button element with a click
					document.getElementById("myButton").click();
				  }
				});
			</script>
		</div>
	</div>
	</body>
</html>